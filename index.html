<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Guide Builder</title>
    <style>
        :root {
            --bg-primary: #1f2121;
            --bg-secondary: #262828;
            --bg-tertiary: #3a3d3d;
            --text-primary: #f5f5f5;
            --text-secondary: #a7a9a9;
            --accent-primary: #32b8c6;
            --accent-secondary: #c01527;
            --accent-tertiary: #21808d;
            --border-color: rgba(167, 169, 169, 0.3);
            --input-bg: #262828;
            --input-border: rgba(167, 169, 169, 0.3);
            --success: #21808d;
            --warning: #a84b2f;
            --focus-ring: 0 0 0 3px rgba(50, 184, 198, 0.4);
            --focus-outline: 2px solid #32b8c6;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
            --radius-base: 8px;
            --radius-lg: 12px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-32: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-family: sans-serif;
            font-size: 14px;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: sans-serif;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            line-height: 1.5;
        }

        .page {
            max-width: 1600px;
            padding: var(--space-32) var(--space-20);
            margin: 0 auto;
        }

        /* ===== –°–¢–†–ê–ù–ò–¶–´ ===== */
        .pages-section {
            margin-bottom: var(--space-32);
            padding: var(--space-20);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
        }

        .pages-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-20);
            gap: var(--space-16);
        }

        .pages-header h2 {
            font-size: 18px;
            color: var(--accent-primary);
        }

        .pages-controls {
            display: flex;
            gap: var(--space-8);
            flex-wrap: wrap;
        }

        #page-input {
            padding: var(--space-10) var(--space-12);
            background-color: var(--input-bg);
            color: var(--text-primary);
            border: 1px solid var(--input-border);
            border-radius: var(--radius-base);
            font-size: 14px;
        }

        #page-input::placeholder {
            color: var(--text-secondary);
        }

        .pages-tabs {
            display: flex;
            gap: var(--space-8);
            flex-wrap: wrap;
            margin-bottom: var(--space-16);
        }

        .page-tab {
            padding: var(--space-10) var(--space-16);
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-base);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            position: relative;
        }

        .page-tab:hover {
            border-color: var(--accent-primary);
        }

        .page-tab.active {
            background-color: var(--accent-primary);
            color: #1f2121;
            border-color: var(--accent-primary);
            font-weight: bold;
        }

        .page-tab-close {
            margin-left: var(--space-8);
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            font-size: 16px;
            padding: 0;
            display: inline;
        }

        .page-tab-close:hover {
            color: var(--accent-secondary);
        }

        /* ===== –û–°–ù–û–í–ù–û–ô –°–ü–ò–°–û–ö ===== */
        #blocks {
            display: flex;
            flex-direction: column;
            gap: var(--space-20);
        }

        .block {
            display: flex;
            gap: var(--space-20);
            min-height: 100px;
            border-radius: var(--radius-lg);
            overflow: hidden;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: all var(--duration-normal) var(--ease-standard);
            position: relative;
        }

        .block:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px rgba(50, 184, 198, 0.1);
        }

        /* ===== –®–ê–ë–õ–û–ù (–õ–ï–í–ê–Ø –ß–ê–°–¢–¨) ===== */
        .template {
            flex: 1;
            padding: var(--space-20);
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: var(--space-16);
            overflow-y: auto;
            /* max-height: 600px; */
            position: relative;
        }

        .block-delete-btn {
            position: absolute;
            top: var(--space-12);
            right: var(--space-12);
            background-color: var(--accent-secondary);
            color: var(--text-primary);
            border: none;
            padding: var(--space-6) var(--space-12);
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all var(--duration-normal) var(--ease-standard);
            z-index: 10;
        }

        .block-delete-btn:hover {
            background-color: #ff4444;
            box-shadow: 0 0 15px rgba(192, 21, 47, 0.3);
            transform: translateY(-2px);
        }

        .template::-webkit-scrollbar {
            width: 8px;
        }

        .template::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: var(--radius-base);
        }

        .template::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: var(--radius-base);
        }

        .template::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        /* ===== –ò–ù–ü–£–¢–´ ===== */
        .template__input {
            display: block;
            width: 100%;
            padding: var(--space-12);
            background-color: var(--input-bg);
            color: var(--text-primary);
            border: 1px solid var(--input-border);
            border-radius: var(--radius-base);
            font-family: sans-serif;
            font-size: 14px;
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .template__input:focus {
            outline: var(--focus-outline);
            border-color: var(--accent-primary);
            box-shadow: var(--focus-ring);
            background-color: var(--bg-tertiary);
        }

        .template__input::placeholder {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .template__input--title {
            font-weight: bold;
            font-size: 16px;
        }

        .template__input--subtitle {
            min-height: 100px;
            resize: vertical;
            font-family: monospace;
            font-size: 12px;
        }

        .template__input--img-id,
        .template__input--img-1,
        .template__input--img-2 {
            font-family: monospace;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* ===== –†–ê–î–ò–û –ö–ù–û–ü–ö–ò ===== */
        .template__radio-container {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-12);
            padding: var(--space-12);
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-base);
            margin: var(--space-6) 0;
        }

        .template__radio-container label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: var(--space-6) var(--space-12);
            border-radius: 4px;
            transition: all var(--duration-normal) var(--ease-standard);
            background-color: transparent;
        }

        .template__radio-container label:hover {
            background-color: var(--bg-secondary);
        }

        input[type='radio'] {
            cursor: pointer;
            width: 18px;
            height: 18px;
            margin: 0 var(--space-6) 0 0;
            accent-color: var(--accent-primary);
        }

        input[type='radio']:checked {
            accent-color: var(--accent-secondary);
        }

        .template__icon {
            font-size: 18px;
        }

        .template__mouse-button,
        .template__movement {
            font-size: 12px;
            font-weight: 500;
        }

        /* ===== –ü–†–ï–í–¨–Æ (–ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨) ===== */
        .preview {
            flex-basis: 760px;
            padding: var(--space-20);
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
            border-left: 2px solid var(--accent-primary);
        }

        .preview__icon {
            font-size: 30px;
            display: inline-block;
            margin-right: var(--space-8);
        }

        .preview__title {
            display: inline;
            font-weight: bold;
            font-size: 18px;
            color: var(--accent-primary);
            margin-right: var(--space-4);
        }

        .preview__subtitle {
            display: block;
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: var(--space-8);
        }

        .preview__mouse-button,
        .preview__movement {
            font-size: 12px;
            /* color: var(--accent-tertiary); */
            /* padding: var(--space-6) var(--space-12); */
            /* background-color: rgba(33, 128, 141, 0.1); */
            /* border-left: 3px solid var(--accent-tertiary); */
            /* border-radius: 4px; */
        }

        /* ===== –ì–ê–õ–ï–†–ï–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ===== */
        .preview__gallery {
            margin-top: var(--space-16);
            display: flex;
            flex-direction: column;
            gap: var(--space-10);
        }

        .preview__img-1,
        .preview__img-2 {
            display: block;
            /* width: 100%; */
            height: 200px;
            align-self: flex-start;
            object-fit: cover;
            border-radius: var(--radius-base);
            border: 1px solid var(--border-color);
            transition: all var(--duration-normal) var(--ease-standard);
            cursor: pointer;
        }

        .preview__img-1:hover,
        .preview__img-2:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 0 15px rgba(50, 184, 198, 0.2);
            transform: scale(1.02);
        }

        /* ===== –ö–ù–û–ü–ö–ò ===== */
        button {
            padding: var(--space-12) var(--space-24);
            border: none;
            border-radius: var(--radius-base);
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: sans-serif;
        }

        button:focus-visible {
            outline: var(--focus-outline);
            box-shadow: var(--focus-ring);
        }

        #create-block-btn {
            display: block;
            width: 100%;
            margin: var(--space-20) 0;
            background-color: var(--accent-primary);
            color: #1f2121;
            border: 2px solid var(--accent-primary);
        }

        #create-block-btn:hover {
            background-color: #2da6ae;
            box-shadow: 0 0 20px rgba(50, 184, 198, 0.3);
            transform: translateY(-2px);
        }

        #create-block-btn:active {
            background-color: #1a6873;
            transform: translateY(0);
        }

        #create-html-btn {
            display: block;
            margin: var(--space-20) auto;
            background-color: var(--accent-secondary);
            color: #fff;
            border: 2px solid var(--accent-secondary);
        }

        #create-html-btn:hover {
            background-color: transparent;
            color: var(--accent-secondary);
            box-shadow: 0 0 20px rgba(192, 21, 47, 0.3);
            transform: translateY(-2px);
        }

        #create-html-btn:active {
            transform: translateY(0);
        }

        #delete-btn {
            background-color: var(--accent-secondary);
            color: #fff;
            border: 2px solid var(--accent-secondary);
            margin: var(--space-10) auto;
            display: block;
        }

        #delete-btn:hover {
            background-color: transparent;
            color: var(--accent-secondary);
            box-shadow: 0 0 20px rgba(192, 21, 47, 0.3);
            transform: translateY(-2px);
        }

        #new-page-btn {
            background-color: var(--accent-primary);
            color: #1f2121;
            border: 2px solid var(--accent-primary);
            padding: var(--space-10) var(--space-16);
        }

        #new-page-btn:hover {
            background-color: #2da6ae;
            box-shadow: 0 0 15px rgba(50, 184, 198, 0.3);
        }

        /* ===== STEAM HTML OUTPUT ===== */
        #steam-html {
            margin-top: var(--space-32);
            padding: var(--space-20);
            border: 1px solid #32b8c6;
            background-color: var(--bg-secondary);
            min-height: 100px;
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            font-family: monospace;
            font-size: 12px;
            overflow: auto;
            max-height: 300px;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .controls-section {
            display: flex;
            gap: var(--space-16);
            justify-content: center;
            margin: var(--space-20) 0;
            flex-wrap: wrap;
        }

        .controls-section button {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="page">
        <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–ê–ú–ò -->
        <div class="pages-section">
            <div class="pages-header">
                <h2>üìÑ –°—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
            </div>
            <div class="pages-tabs" id="pages-tabs"></div>
            <div class="pages-controls">
                <input 
                    type="text" 
                    id="page-input" 
                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã..."
                    maxlength="30"
                />
                <button id="new-page-btn">+ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
            </div>
        </div>

        <!-- –ë–õ–û–ö–ò -->
        <h1 style="color: var(--accent-primary); margin-bottom: var(--space-20);">Steam Guide Builder</h1>
        <ul id="blocks"></ul>
        
        <button id="create-block-btn">+ –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫</button>

        <!-- –ö–û–ù–¢–†–û–õ–´ -->
        <div class="controls-section">
            <button id="create-html-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
            <button id="delete-btn">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏</button>
        </div>

        <!-- –í–´–•–û–î HTML -->
        <div id="steam-html"></div>
    </div>

    <script>
const elements = {
    createBlockBtn: document.querySelector('#create-block-btn'),
    list: document.querySelector('#blocks'),
    html: document.querySelector('#steam-html'),
    delete: document.querySelector('#delete-btn'),
    createHTMLButton: document.querySelector('#create-html-btn'),
    newPageBtn: document.querySelector('#new-page-btn'),
    pageInput: document.querySelector('#page-input'),
    pagesTabs: document.querySelector('#pages-tabs'),
};

const STORAGE_KEY = 'blocks';
const PAGES_STORAGE_KEY = 'pages';
const CURRENT_PAGE_KEY = 'currentPage';

// –†–ê–î–ò–û –ö–ù–û–ü–ö–ò
const answers = [
    { value: 'üö¨', text: 'üö¨' },
    { value: 'üí£', text: 'üí£' },
    { value: 'üåü', text: 'üåü' },
    { value: 'üî•', text: 'üî•' },
    { value: 'üêÄ', text: 'üêÄ' },
];

const mouseButtons = [
    { value: '0', text: '–õ–ö–ú' },
    { value: '1', text: '–õ–ö–ú + –ü–ö–ú' },
    { value: '2', text: '–ü–ö–ú' },
];

const movement = [
    { value: '0', text: '–°—Ç–æ–π –Ω–∞ –º–µ—Å—Ç–µ' },
    { value: '1', text: '–ü—Ä—ã–∂–æ–∫' },
    { value: '2', text: '–ü—Ä—ã–∂–æ–∫ + –í–ø–µ—Ä—ë–¥' },
    { value: '3', text: '–í–ø–µ—Ä—ë–¥' },
    { value: '4', text: 'Shift + –í–ø–µ—Ä—ë–¥' },
    { value: '5', text: '–î—Ä—É–≥–æ–µ' },
];

let MOCKDATA = {};
let currentPage = 'default';

function createRadio(container, itemValue) {
    const id = crypto.randomUUID();
    const div = document.createElement('div');
    div.classList.add("template__radio-container");
    answers.forEach((item) => {
        const label = document.createElement('label');
        const input = document.createElement('input');
        if (itemValue == item.text) {
            input.checked = true;
        }
        input.type = 'radio';
        input.name = 'answer' + id;
        input.value = item.value;
        input.classList.add("input-radio-icon");
        input.classList.add("template__icon");
        const text = document.createTextNode(' ' + item.text);
        label.appendChild(text);
        label.appendChild(input);
        div.appendChild(label);
    });
    container.appendChild(div);
}

function createRadioMouse(container, itemValue) {
    const id = crypto.randomUUID();
    const div = document.createElement('div');
    div.classList.add("template__radio-container");
    mouseButtons.forEach((item) => {
        const label = document.createElement('label');
        const input = document.createElement('input');
        if (itemValue == item.text) {
            input.checked = true;
        }
        input.type = 'radio';
        input.name = 'mouseButton' + id;
        input.value = item.text;
        input.classList.add("input-radio-mousebytton");
        input.classList.add("template__mouse-button");
        const text = document.createTextNode(' ' + item.text);
        label.appendChild(text);
        label.appendChild(input);
        div.appendChild(label);
    });
    container.appendChild(div);
}

function createRadioMovement(container, itemValue) {
    const id = crypto.randomUUID();
    const div = document.createElement('div');
    div.classList.add("template__radio-container");
    movement.forEach((item) => {
        const label = document.createElement('label');
        const input = document.createElement('input');
        if (itemValue == item.text) {
            input.checked = true;
        }
        input.type = 'radio';
        input.name = 'movement' + id;
        input.value = item.text;
        input.classList.add("input-radio-movement");
        input.classList.add("template__movement");
        const text = document.createTextNode(' ' + item.text);
        label.appendChild(text);
        label.appendChild(input);
        div.appendChild(label);
    });
    container.appendChild(div);
}

elements.createBlockBtn.addEventListener('click', function (event) {
    const newItem = {
        icon: "",
        mouseButton: "–õ–ö–ú",
        movement: "–ü—Ä—ã–∂–æ–∫",
        title: "",
        subtitle: "",
        imageId: "",
        images: ["", ""],
        keys: "[keys]",
    };
    MOCKDATA[currentPage].push(newItem);
    saveState();
    renderList();
});

function loadState() {
    const savedPages = localStorage.getItem(PAGES_STORAGE_KEY);
    const savedCurrent = localStorage.getItem(CURRENT_PAGE_KEY);
    
    if (savedPages) {
        MOCKDATA = JSON.parse(savedPages);
        currentPage = savedCurrent || 'default';
    } else {
        MOCKDATA = {
            default: [{
                icon: "üö¨",
                mouseButton: "–õ–ö–ú",
                movement: "–ü—Ä—ã–∂–æ–∫",
                title: "–î—ã–º –≤ –æ–∫–Ω–æ",
                subtitle: "–ö–æ—Ä–æ—Ç–∫–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å–∫–∏–¥–∫–∏",
                imageId: "",
                images: ["[screenshot=3631986752;sizeFull,inline;https://images.steamusercontent.com/ugc/12387406899713426751/AFDC03049ECCF9512E2C47A06FEFE00F0A821C80/][/screenshot]", "[screenshot=3631986624;sizeFull,inline;https://images.steamusercontent.com/ugc/11813492859766757302/6C2588F3FFA4A0E3B64976991B24E7707D33F1B1/][/screenshot]"],
                keys: "[keys]",
            }]
        };
        currentPage = 'default';
    }
}

function saveState() {
    localStorage.setItem(PAGES_STORAGE_KEY, JSON.stringify(MOCKDATA));
    localStorage.setItem(CURRENT_PAGE_KEY, currentPage);
    createSteamHTML();
}

function renderList() {
    elements.list.innerHTML = "";
    const blocks = MOCKDATA[currentPage] || [];
    blocks.forEach((item, index) => {
        createBlock(item, index);
    });
    createSteamHTML();
}

function renderPageTabs() {
    elements.pagesTabs.innerHTML = "";
    Object.keys(MOCKDATA).forEach(pageName => {
        const tab = document.createElement('div');
        tab.classList.add('page-tab');
        if (pageName === currentPage) {
            tab.classList.add('active');
        }
        
        const tabLabel = document.createElement('span');
        tabLabel.textContent = pageName;
        tabLabel.style.cursor = 'pointer';
        tabLabel.addEventListener('click', () => {
            currentPage = pageName;
            saveState();
            renderPageTabs();
            renderList();
        });
        
        const closeBtn = document.createElement('button');
        closeBtn.classList.add('page-tab-close');
        closeBtn.textContent = '√ó';
        closeBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (Object.keys(MOCKDATA).length === 1) {
                alert('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!');
                return;
            }
            if (confirm(`–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "${pageName}"? –í—Å–µ –±–ª–æ–∫–∏ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.`)) {
                delete MOCKDATA[pageName];
                if (currentPage === pageName) {
                    currentPage = Object.keys(MOCKDATA)[0];
                }
                saveState();
                renderPageTabs();
                renderList();
            }
        });
        
        tab.appendChild(tabLabel);
        tab.appendChild(closeBtn);
        elements.pagesTabs.appendChild(tab);
    });
}

elements.newPageBtn.addEventListener('click', () => {
    const pageName = elements.pageInput.value.trim();
    if (!pageName) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã!');
        return;
    }
    if (MOCKDATA[pageName]) {
        alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
        return;
    }
    MOCKDATA[pageName] = [];
    currentPage = pageName;
    elements.pageInput.value = '';
    saveState();
    renderPageTabs();
    renderList();
});

elements.pageInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        elements.newPageBtn.click();
    }
});

function createBlock(item, index) {
    const li = document.createElement('li');
    li.classList.add('block');
    li.dataset.id = index;
    li.appendChild(createTemplate(item, index));
    li.appendChild(createPreview(item, index));
    elements.list.appendChild(li);
}

function createTemplate(item, index) {
    const template = document.createElement('div');
    template.classList.add('template');

    // DELETE BUTTON
    const deleteBtn = document.createElement('button');
    deleteBtn.classList.add('block-delete-btn');
    deleteBtn.textContent = '‚úï –£–¥–∞–ª–∏—Ç—å';
    deleteBtn.addEventListener('click', () => {
        if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫?')) {
            MOCKDATA[currentPage].splice(index, 1);
            saveState();
            renderList();
        }
    });
    template.appendChild(deleteBtn);

    createRadio(template, item.icon);
    createRadioMouse(template, item.mouseButton);
    createRadioMovement(template, item.movement);

    const title = document.createElement('input');
    title.classList.add('template__input--title');
    title.classList.add('template__input');
    title.value = item.title;
    title.placeholder = "–ù–ê–ó–í–ê–ù–ò–ï";

    const subtitle = document.createElement('textarea');
    subtitle.classList.add('template__input--subtitle');
    subtitle.classList.add('template__input');
    subtitle.value = item.subtitle;
    subtitle.placeholder = "–û–ü–ò–°–ê–ù–ò–ï";

    const imgId = document.createElement('input');
    imgId.classList.add('template__input--img-id');
    imgId.classList.add('template__input');
    imgId.value = "–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨. –£–î–ê–õ–ò–¢–¨. –ù–ï –¢–†–û–ì–ê–¢–¨";

    const img_1 = document.createElement('input');
    img_1.classList.add('template__input--img-1');
    img_1.classList.add('template__input');
    img_1.value = item.images[0];
    img_1.placeholder = "–°–°–´–õ–ö–ê –ù–ê –ö–ê–†–¢–ò–ù–ö–£. –ö–£–î–ê –¶–ï–õ–ò–¢–¨–°–Ø";

    const img_2 = document.createElement('input');
    img_2.classList.add('template__input--img-2');
    img_2.classList.add('template__input');
    img_2.placeholder = "–°–°–´–õ–ö–ê –ù–ê –í–¢–û–†–£–Æ –ö–ê–†–¢–ò–ù–ö–£ (–ï–°–õ–ò –ù–ê–î–û). –ö–£–î–ê –í–°–¢–ê–í–ê–¢–¨";
    img_2.value = item.images[1];

    template.appendChild(title);
    template.appendChild(subtitle);
    template.appendChild(imgId);
    template.appendChild(img_1);
    template.appendChild(img_2);
    return template;
}

function createPreview(item, index) {
    const preview = document.createElement('div');
    preview.classList.add('preview');

    const icon = document.createElement('span');
    icon.classList.add('preview__icon');
    icon.textContent = `${item.icon}`;

    const mouseButton = document.createElement('div');
    mouseButton.classList.add('preview__mouse-button');
    mouseButton.textContent = `–ú—ã—à—å: ${item.mouseButton} `;

    const movement = document.createElement('div');
    movement.classList.add('preview__movement');
    movement.textContent = `–î–≤–∏–∂–µ–Ω–∏–µ: ${item.movement} `;

    const title = document.createElement('p');
    title.classList.add('preview__title');
    title.textContent = item.title;

    const subtitle = document.createElement('p');
    subtitle.classList.add('preview__subtitle');
    subtitle.textContent = item.subtitle;

    const gallery = document.createElement('div');
    gallery.classList.add('preview__gallery');

    const img_1 = document.createElement('img');
    img_1.classList.add('preview__img-1');
    img_1.src = steamImageHTMLToImageLink(item.images[0]);
    img_1.alt = "image-1";

    const img_2 = document.createElement('img');
    img_2.classList.add('preview__img-2');
    img_2.src = steamImageHTMLToImageLink(item.images[1]);
    img_2.alt = "image-2";

    gallery.appendChild(img_1);
    gallery.appendChild(img_2);

    preview.appendChild(icon);
    preview.appendChild(title);
    preview.appendChild(subtitle);
    preview.appendChild(mouseButton);
    preview.appendChild(movement);
    preview.appendChild(gallery);
    return preview;
}

elements.list.addEventListener("input", function (event) {
    const input = event.target;
    const li = input.closest('li');
    const index = parseInt(li.dataset.id);

    if (input.classList.contains('template__input--title')) {
        const p = li.querySelector('.preview__title');
        let text = input.value.trim();
        text = text.charAt(0).toUpperCase() + text.slice(1);
        p.textContent = text;
        MOCKDATA[currentPage][index].title = text;
    }

    if (input.classList.contains('template__input--subtitle')) {
        const p = li.querySelector('.preview__subtitle');
        let text = input.value.trim();
        text = text.charAt(0).toUpperCase() + text.slice(1);
        p.textContent = text;
        MOCKDATA[currentPage][index].subtitle = text;
    }

    if (input.classList.contains('template__input--img-id')) {
        MOCKDATA[currentPage][index].imageId = input.value;
    }

    if (input.classList.contains('template__input--img-1')) {
        const img = li.querySelector('.preview__img-1');
        img.src = steamImageHTMLToImageLink(input.value);
        img.alt = "image-1";
        MOCKDATA[currentPage][index].images[0] = input.value.trim();
    }

    if (input.classList.contains('template__input--img-2')) {
        const img = li.querySelector('.preview__img-2');
        img.src = steamImageHTMLToImageLink(input.value);
        img.alt = "image-2";
        MOCKDATA[currentPage][index].images[1] = input.value.trim();
    }

    saveState();
});

elements.list.addEventListener('change', (event) => {
    const target = event.target;
    const li = target.closest('li');
    const index = parseInt(li.dataset.id);

    if (target.matches('input[type="radio"].input-radio-movement')) {
        const movement = li.querySelector('.preview__movement');
        movement.textContent = `–î–≤–∏–∂–µ–Ω–∏–µ: ${target.value}`;
        MOCKDATA[currentPage][index].movement = target.value;
        saveState();
    }

    if (target.matches('input[type="radio"].input-radio-mousebytton')) {
        const mouseButton = li.querySelector('.preview__mouse-button');
        mouseButton.textContent = `–ú—ã—à—å: ${target.value}`;
        MOCKDATA[currentPage][index].mouseButton = target.value;
        saveState();
    }

    if (target.matches('input[type="radio"].input-radio-icon')) {
        const icon = li.querySelector('.preview__icon');
        icon.textContent = `${target.value} `;
        MOCKDATA[currentPage][index].icon = target.value;
        saveState();
    }
});

function createSteamHTML() {
    elements.html.textContent = '';
    const blocks = MOCKDATA[currentPage] || [];
    blocks.forEach((item, index) => {
        let text = createHTMLForSingleBlock(item, index);
        elements.html.textContent += text;
    });
}

function createHTMLForSingleBlock(item, index) {
    let text = ``;
    text += `[h1]–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞: –ù–∞–∑–≤–∞–Ω–∏–µ[/h1]\n`
    text += `[h2]–ó–∞–º–µ—Ç–∫–∏[/h2]\n`
    text += `\n`;
    text += `[h1]${item.icon} ${item.title}[/h1]\n`;
    text += item.subtitle ? `${item.subtitle}\n` : ``;
    text += `\n`;
    text += item.mouseButton ? `–ú—ã—à—å: ${item.mouseButton} \n` : ``;
    text += item.movement ? `–î–≤–∏–∂–µ–Ω–∏–µ: ${item.movement} \n` : ``;
    text += `\n`;
    text += `[table]\n`;
    text += item.images[0] ? `[tr][td]${item.images[0]}[/td][/tr]\n` : `[tr][td]–¢–£–¢ –î–û–õ–ñ–ù–ê –ë–´–¢–¨ –ö–ê–†–¢–ò–ù–ö–ê[/td][/tr]\n`;
    text += item.images[1] ? `[tr][td]${item.images[1]}[/td][/tr]\n` : ``;
    text += `[/table]\n`;
    text += `[hr][/hr]\n`;
    return text;
}

elements.delete.addEventListener('click', function (event) {
    event.preventDefault();
    if (confirm("–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ?")) {
        MOCKDATA[currentPage] = [];
        saveState();
        renderList();
    }
});

elements.createHTMLButton.addEventListener('click', async function (event) {
    event.preventDefault();
    createSteamHTML();
    const text = elements.html.textContent;
    try {
        await navigator.clipboard.writeText(text);
        elements.createHTMLButton.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        setTimeout(() => (elements.createHTMLButton.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥'), 1500);
    } catch (err) {
        console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å: ', err);
    }
});

function steamImageHTMLToImageLink(string) {
    const match = string.match(/https?:\/\/[^;[\]]+/);
    const url = match ? match[0] : string;
    return url;
}

function init() {
    loadState();
    renderPageTabs();
    renderList();
}

init();
    </script>
</body>
</html>
